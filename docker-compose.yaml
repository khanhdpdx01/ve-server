version: '3'
networks:
  backend:
     driver: bridge
  frontend:
    driver: bridge

services:
  be:  
    image: khanhdpdx01/vecert-be:1.0
    restart: always                    
#    build:
#       context: ../ve-be
    environment:
      - SERVER_HOST=http://localhost:8080
      - DATABASE_HOST=localhost
      - DATABASE_PORT=3307
      - DATABASE_NAME=vecert
      - DATABASE_ROOT_USER=root
      - DATABASE_ROOT_PASSWORD=root
      - FABRIC_CHANNEL_NAME=demo
      - FABRIC_CHAINCODE_NAME=qlvb1
      - FABRIC_EXPLORER_HOST=
      - IPFS_HOST=localhost
      - IPFS_PORT=5002
    # command: docker rmi $$(docker images --filter "dangling=true" -q --no-trunc)
    volumes:
      - ../ve-be/wallet/connection.json:/app/connection.json
      - ../ve-be/wallet:/app/wallet
      - ../ve-be/image:/app/image
    ports:                              
      - "3000:3000" 
    networks:
      - backend

  fe:                         
    image: khanhdpdx01/vecert-fe:1.0
    restart: always                  
#    build:
#       context: ../vecert-fe
    ports:
      - "8080:80"                     
    networks:
      - frontend
  
  
    

  