version: '3'
networks:
  # backend:
  #   driver: bridge
  frontend:
    driver: bridge
  test:
    external: true
    name: fabric_test

services:
  be:  
    image: khanhdpdx01/vecert-be                             
    container_name: vecert-be
    restart: always                    
    # build:
    #   context: ../ve-be      
    environment:
      - SERVER_HOST=http://localhost:8080
      - DATABASE_HOST=mariadb.cqajhfvdpery.us-west-1.rds.amazonaws.com
      - DATABASE_PORT=3306
      - DATABASE_NAME=vecert
      - DATABASE_ROOT_USER=root
      - DATABASE_ROOT_PASSWORD=Khanh2001!
      - FABRIC_CHANNEL_NAME=mychannel
      - FABRIC_CHAINCODE_NAME=chaincode
      - IPFS_HOST=localhost
      - IPFS_PORT=5002
    # command: docker rmi $$(docker images --filter "dangling=true" -q --no-trunc)
    volumes:
      - /home/khanh/VTS/vecert-network/organizations/peerOrganizations/issuer.com/connection-org1.json:/app/connection.json
      - ../ve-be/wallet:/app/wallet
      - ../ve-be/image:/app/image
    ports:                              
      - "3000:3000" 
    networks:
      - test

  fe:                         
    image: khanhdpdx01/vecert-fe        
    container_name: vecert-fe 
    restart: always                  
    # build:
    #   context: ../vecert-fe                
    ports:
      - "8080:80"                     
    networks:
      - frontend
  
  
    

  